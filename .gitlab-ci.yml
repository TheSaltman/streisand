build_and_deployreact:
  image: node:latest
  
stages:
  - build
  - deploy
  
build_react:
  stage: build

  script:
    - echo "====== Install dependencies ======"
    - npm i
    - echo "====== Build react ======"
    - gulp

  artifacts:
    name: panel-build
    paths:
      - build

deploy_react:
    image: alpine:latest

before_script:
- apk update
- apk add doxygen
- apk add ttf-freefont graphviz
- apk add 
- apk add openssh-client

stage:
  - deploy

deploy to production:
  stage: deploy
  environment: production
  only:
    - master
  script: rsync-script.sh saltman@ronzertnert.me:jumpcut-web /gulp/jumpcut-web